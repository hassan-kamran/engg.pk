{% extends 'base.html' %}

{% block title %}{{ profile_user.get_full_name|default:profile_user.username }} - Profile{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-8">
    <!-- Profile Header -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex items-start gap-6">
            {% if profile.avatar %}
                <img src="{{ profile.avatar.url }}" alt="{{ profile_user.username }}" class="w-24 h-24 rounded-full object-cover">
            {% else %}
                <div class="w-24 h-24 rounded-full bg-green-600 flex items-center justify-center text-white text-3xl font-bold">
                    {{ profile_user.username.0|upper }}
                </div>
            {% endif %}

            <div class="flex-1">
                <h1 class="text-3xl font-bold text-gray-800">
                    {{ profile_user.get_full_name|default:profile_user.username }}
                </h1>
                <p class="text-gray-600 mt-1">@{{ profile_user.username }}</p>

                <div class="mt-2 flex gap-3">
                    <span class="inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">
                        {{ profile.get_role_display }}
                    </span>
                    {% if profile.verified %}
                        <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">
                            âœ“ Verified
                        </span>
                    {% endif %}
                </div>

                {% if request.user == profile_user %}
                    <a href="{% url 'core:profile_edit' %}" class="mt-4 inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                        Edit Profile
                    </a>
                {% endif %}
            </div>
        </div>

        {% if profile.affiliation %}
            <p class="mt-4 text-gray-700">
                <strong>Affiliation:</strong> {{ profile.affiliation }}
            </p>
        {% endif %}

        {% if profile.expertise %}
            <div class="mt-4">
                <strong class="text-gray-700">Expertise:</strong>
                <div class="flex flex-wrap gap-2 mt-2">
                    {% for skill in profile.expertise %}
                        <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm">{{ skill }}</span>
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        {% if profile.bio %}
            <div class="mt-4">
                <strong class="text-gray-700">Bio:</strong>
                <p class="mt-2 text-gray-600">{{ profile.bio }}</p>
            </div>
        {% endif %}
    </div>

    <!-- Contributions -->
    <div class="grid md:grid-cols-3 gap-6">
        <!-- Forum Posts -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Forum Posts</h2>
            {% if forum_posts %}
                <ul class="space-y-2">
                    {% for post in forum_posts %}
                        <li>
                            <a href="{{ post.get_absolute_url }}" class="text-green-600 hover:underline">
                                {{ post.title|truncatewords:6 }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-gray-500 text-sm">No posts yet</p>
            {% endif %}
        </div>

        <!-- Industry Insights -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Insights</h2>
            {% if insights %}
                <ul class="space-y-2">
                    {% for insight in insights %}
                        <li>
                            <a href="{{ insight.get_absolute_url }}" class="text-green-600 hover:underline">
                                {{ insight.title|truncatewords:6 }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-gray-500 text-sm">No insights yet</p>
            {% endif %}
        </div>

        <!-- Program Reviews -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Reviews</h2>
            {% if program_reviews %}
                <ul class="space-y-2">
                    {% for review in program_reviews %}
                        <li>
                            <a href="{{ review.program.get_absolute_url }}" class="text-green-600 hover:underline">
                                {{ review.program.program_name|truncatewords:4 }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-gray-500 text-sm">No reviews yet</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
